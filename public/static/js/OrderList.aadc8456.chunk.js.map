{"version":3,"file":"static/js/OrderList.aadc8456.chunk.js","mappings":"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","sources":["pages/hooks/useLoading.js","pages/process/OrderList.js"],"sourcesContent":["import { useState, useCallback } from 'react';\n\nexport default function useLoading(req) {\n  const [loading, setLoading] = useState(false);\n  \n  const wrapReq = useCallback(\n    (...args) => {\n      setLoading(true);\n      return req(...args)\n        .then((data) => {\n          setLoading(false);\n          return Promise.resolve(data);\n        })\n        .catch((reason) => {\n          setLoading(false);\n          return Promise.reject(reason);\n        });\n    },\n    [req]\n  );\n  return [loading, wrapReq];\n}\n","import React, { Fragment, useState, useEffect } from 'react';\nimport moment from 'moment/moment';\n\nimport { Card, Input, Table, DatePicker, Button, Form, message } from 'antd';\nimport { SearchOutlined, DownloadOutlined } from '@ant-design/icons';\nimport useLoading from '../hooks/useLoading';\nimport { getOrderListUser } from '../../api/api';\nimport { createDownLoadData, formatExportData } from '../../utils/utils';\nimport 'moment/locale/zh-cn';\nimport locale from 'antd/es/date-picker/locale/zh_CN';\n\nfunction OrderList() {\n  const [data, updateData] = useState([]);\n  const [pagination, updatePagination] = useState({ current: 1, pageSize: 30 });\n  const [rows, updateRows] = useState([]);\n  const [loading, req] = useLoading(getOrderListUser);\n\n  const columns = [\n    { title: '单号', dataIndex: 'order_num', key: 'id' },\n    {\n      title: '日期',\n      key: 'date',\n      render: (_, record) => moment(record.create_time).format('YYYY-MM-DD HH:mm:ss'),\n    },\n    { title: '客户', dataIndex: 'custom_name' },\n    { title: '完成状态', dataIndex: 'status', key: 'status' },\n    { title: '类别', dataIndex: 'type_name' },\n    { title: '型号', dataIndex: 'model_name', key: 'model' },\n    { title: '品牌', dataIndex: 'brand_name' },\n    { title: '数量', dataIndex: 'count', key: 'count' },\n    { title: '单价', dataIndex: 'price', key: 'price' },\n    {\n      title: '小计',\n      dataIndex: 'total_price',\n      render: (_, record) => {\n        return record.total_price ? record.total_price : Number(record.count) * Number(record.price);\n      },\n    },\n    { title: '存放地址', dataIndex: 'storage_address' },\n  ];\n\n  useEffect(() => {\n    getOrder();\n  }, []);\n\n  function getOrder(values) {\n    req(values).then((res) => {\n      if (res?.code === 200) {\n        const { list, pagination } = res?.result;\n        updateData(list);\n        updatePagination(pagination);\n      }\n    });\n  }\n\n  function onChange(selectedRowKeys, selectedRows) {\n    updateRows(selectedRows);\n  }\n\n  function pageChange(p, size) {\n    getOrder({ current: p, pageSize: size });\n  }\n\n  function onFinish(values) {\n    const { time, customName } = values;\n    if (!time && !customName) {\n      message.error('请输入查询条件');\n    }\n    const startTime = time[0] instanceof moment ? moment(time[0]).format('YYYY-MM-DD HH:mm:ss') : '';\n    const endTime = time[1] instanceof moment ? moment(time[1]).format('YYYY-MM-DD HH:mm:ss') : '';\n    getOrder({ startTime, endTime, customName });\n  }\n\n  function download() {\n    if (!rows.length) {\n      return message.error('请先选择要导出的数据');\n    }\n\n    let data = JSON.parse(JSON.stringify(rows));\n    data = formatExportData(data);\n\n    createDownLoadData(data);\n  }\n\n  return (\n    <Fragment>\n      <Card bordered={false}>\n        <div style={{ marginBottom: 10, display: 'flex' }}>\n          <Form onFinish={onFinish} layout=\"inline\">\n            <Form.Item name=\"time\">\n              <DatePicker.RangePicker showTime placeholder={['开始时间', '结束时间']} locale={locale} />\n            </Form.Item>\n\n            <Form.Item name=\"customName\">\n              <Input placeholder=\"输入客户名\" style={{ width: 150, margin: '0 10px' }} />\n            </Form.Item>\n\n            <Form.Item>\n              <Button type=\"primary\" icon={<SearchOutlined />} htmlType=\"submit\">\n                搜索\n              </Button>\n            </Form.Item>\n          </Form>\n          <Button type=\"primary\" icon={<DownloadOutlined />} onClick={download}>\n            导出\n          </Button>\n        </div>\n\n        <Table\n          rowKey=\"id\"\n          loading={loading}\n          dataSource={data}\n          columns={columns}\n          rowSelection={{ onChange }}\n          pagination={{ ...pagination, onChange: pageChange }}\n          bordered\n          size=\"small\"\n        />\n      </Card>\n    </Fragment>\n  );\n}\n\nexport default OrderList;\n"],"names":["useLoading","req","useState","loading","setLoading","wrapReq","useCallback","then","data","Promise","resolve","catch","reason","reject","updateData","current","pageSize","pagination","updatePagination","rows","updateRows","getOrderListUser","columns","title","dataIndex","key","render","_","record","moment","create_time","format","total_price","Number","count","price","getOrder","values","res","code","result","list","useEffect","Fragment","bordered","style","marginBottom","display","onFinish","time","customName","message","startTime","endTime","layout","name","showTime","placeholder","locale","width","margin","type","icon","htmlType","onClick","length","JSON","parse","stringify","formatExportData","createDownLoadData","rowKey","dataSource","rowSelection","onChange","selectedRowKeys","selectedRows","p","size"],"sourceRoot":""}