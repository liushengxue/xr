"use strict";(self.webpackChunkxr_static=self.webpackChunkxr_static||[]).push([[120],{519:function(e,n,t){t.r(n),t.d(n,{default:function(){return k}});var r=t(4165),a=t(5861),i=t(9439),s=t(2791),l=t(1095),o=t(3695),d=t(2283),c=t(7309),u=t(2211),m=t(2365),f=t(9286),h=t(8452),x=t(3734),Z=t(4219),p=t(3344),v=t(1229),j=t(184);var g=function(e){var n=e.form,t=e.handleOk,o=e.typeList,d=e.updateVisible,c=(0,s.useState)([]),u=(0,i.Z)(c,2),m=u[0],f=u[1],g=(0,s.useState)([]),b=(0,i.Z)(g,2),y=b[0],I=b[1];function w(){return(w=(0,a.Z)((0,r.Z)().mark((function e(t){var a,i,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.setFieldsValue({modelId:"",brandId:""}),!t){e.next=6;break}return e.next=4,(0,v.wz)({typeId:t});case 4:200===(null===(a=e.sent)||void 0===a?void 0:a.code)&&(f(null===a||void 0===a||null===(i=a.result)||void 0===i?void 0:i.modelList),I(null===a||void 0===a||null===(s=a.result)||void 0===s?void 0:s.brandList));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,j.jsx)(h.Z,{title:"\u5e93\u5b58\u5f55\u5165",open:!0,cancelText:"\u53d6\u6d88",okText:"\u786e\u5b9a",onOk:t,onCancel:function(){n.resetFields(),d(!1)},children:(0,j.jsxs)(l.Z,{form:n,labelCol:{span:4},wrapperCol:{span:19},autoComplete:"off",children:[(0,j.jsx)(l.Z.Item,{label:"\u7c7b\u522b",name:"typeId",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u7c7b\u522b"}],children:(0,j.jsx)(x.Z,{showSearch:!0,onChange:function(e){return w.apply(this,arguments)},children:o.map((function(e){return(0,j.jsx)(x.Z.Option,{value:e.id,children:e.name},e.id)}))})}),(0,j.jsx)(l.Z.Item,{label:"\u578b\u53f7",name:"modelId",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u578b\u53f7"}],children:(0,j.jsx)(x.Z,{showSearch:!0,children:m.map((function(e){return(0,j.jsx)(x.Z.Option,{value:e.id,children:e.name},e.id)}))})}),(0,j.jsx)(l.Z.Item,{label:"\u54c1\u724c",name:"brandId",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u54c1\u724c"}],children:(0,j.jsx)(x.Z,{showSearch:!0,children:y.map((function(e){return(0,j.jsx)(x.Z.Option,{value:e.id,children:e.name},e.id)}))})}),(0,j.jsx)(l.Z.Item,{label:"\u914d\u7f6e",name:"config",children:(0,j.jsx)(Z.Z,{})}),(0,j.jsx)(l.Z.Item,{label:"\u6570\u91cf",name:"count",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6570\u91cf"}],children:(0,j.jsx)(p.Z,{})}),(0,j.jsx)(l.Z.Item,{label:"\u5382\u5546",name:"factory",children:(0,j.jsx)(Z.Z,{})}),(0,j.jsx)(l.Z.Item,{label:"\u5b58\u653e\u5730\u5740",name:"storageAddress",children:(0,j.jsx)(Z.Z,{})}),(0,j.jsx)(l.Z.Item,{label:"\u5907\u6ce8",name:"note",children:(0,j.jsx)(Z.Z,{})})]})})},b=t(6935),y=t(7857),I=t(2426),w=t.n(I);var k=function(){var e=(0,s.useState)([]),n=(0,i.Z)(e,2),t=n[0],h=n[1],x=(0,s.useState)(!1),Z=(0,i.Z)(x,2),p=Z[0],I=Z[1],k=(0,s.useState)([]),S=(0,i.Z)(k,2),_=S[0],C=S[1],O=(0,s.useState)([]),Y=(0,i.Z)(O,2),F=Y[0],H=Y[1],M=(0,s.useContext)(b.Z).currentUser,V=void 0===M?{}:M,z=l.Z.useForm(),D=(0,i.Z)(z,1)[0],L=[{title:"\u7c7b\u522b",dataIndex:"type_name"},{title:"\u578b\u53f7",dataIndex:"model_name"},{title:"\u54c1\u724c",dataIndex:"brand_name"},{title:"\u6570\u91cf",dataIndex:"count"},{title:"\u914d\u7f6e",dataIndex:"config"},{title:"\u5907\u6ce8",dataIndex:"note"},{title:"\u5e93\u5b58\u5730\u5740",dataIndex:"storage_address"},{title:"\u5165\u5e93\u65e5\u671f",key:"createTime",render:function(e,n){return w()(n.create_time).format("YYYY-MM-DD HH:mm:ss")}}];function q(e){(0,v.jR)(e).then((function(e){200===(null===e||void 0===e?void 0:e.code)&&h(null===e||void 0===e?void 0:e.result)}))}function B(){return(B=(0,a.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.validateFields();case 2:return n=e.sent,e.next=5,(0,v.pN)(n);case 5:200===e.sent.code?(o.ZP.success("\u5f55\u5165\u6210\u529f"),I(!1),D.resetFields(),q()):o.ZP.error("\u5f55\u5165\u5931\u8d25");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,s.useEffect)((function(){(0,v.Tz)().then((function(e){200===(null===e||void 0===e?void 0:e.code)&&C(null===e||void 0===e?void 0:e.result)})),q()}),[]),(0,j.jsx)(s.Fragment,{children:(0,j.jsxs)(d.Z,{bordered:!1,children:[(0,j.jsx)("div",{style:{marginBottom:10},children:"1"===V.role&&(0,j.jsxs)("div",{style:{float:"right",marginBottom:5},children:[(0,j.jsx)(c.Z,{type:"primary",icon:(0,j.jsx)(m.Z,{}),onClick:function(){if(!F.length)return o.ZP.error("\u8bf7\u5148\u9009\u62e9\u8981\u5bfc\u51fa\u7684\u6570\u636e");var e=JSON.parse(JSON.stringify(F));e=e.map((function(e){return{"\u7c7b\u522b":e.type_name,"\u578b\u53f7":e.model_name,"\u54c1\u724c":e.brand_name,"\u6570\u91cf":e.count,"\u914d\u7f6e":e.config,"\u5907\u6ce8":e.note,"\u5b58\u653e\u5730\u5740":e.storage_address,"\u5165\u5e93\u65e5\u671f":w()(e.create_time).format("YYYY-MM-DD HH:mm:ss")}})),(0,y.UB)(e)},children:"\u5bfc\u51fa"}),(0,j.jsx)(c.Z,{type:"primary",style:{marginLeft:10},icon:(0,j.jsx)(f.Z,{}),onClick:function(){return I(!p)},children:"\u5e93\u5b58\u5f55\u5165"})]})}),(0,j.jsx)(u.Z,{dataSource:t,rowSelection:{onChange:function(e,n){H(n)}},columns:L,pagination:{},bordered:!0,size:"small"}),p&&(0,j.jsx)(g,{form:D,typeList:_,handleOk:function(){return B.apply(this,arguments)},updateVisible:I})]})})}},2365:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(1413),a=t(2791),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},s=t(4291),l=function(e,n){return a.createElement(s.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:n,icon:i}))};l.displayName="DownloadOutlined";var o=a.forwardRef(l)}}]);
//# sourceMappingURL=StockList.1a66d616.chunk.js.map