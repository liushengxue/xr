"use strict";(self.webpackChunkxr_static=self.webpackChunkxr_static||[]).push([[953],{3284:function(e,n,s){s.r(n),s.d(n,{default:function(){return S}});var t=s(4165),r=s(3433),a=s(5861),l=s(1413),i=s(9439),d=s(2791),c=s(1095),o=s(3695),u=s(2283),m=s(7309),x=s(2211),h=s(9286),p={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"},j=s(4291),Z=function(e,n){return d.createElement(j.Z,(0,l.Z)((0,l.Z)({},e),{},{ref:n,icon:p}))};Z.displayName="SaveOutlined";var f=d.forwardRef(Z),v=s(7575),b=s(590).Z,y=s(9752).Z,I=s(3734),g=s(4219),N=s(1229),w=s(184);var z=function(e){var n=e.form,s=e.typeList,r=e.close,l=(0,d.useState)([]),o=(0,i.Z)(l,2),x=o[0],h=o[1],p=(0,d.useState)([]),j=(0,i.Z)(p,2),Z=j[0],f=j[1];function v(e){n.setFieldsValue(e)}function z(){return(z=(0,a.Z)((0,t.Z)().mark((function e(n){var r,a,l;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=6;break}return v({typeName:s.find((function(e){return e.id===n})).name,base:{model:"",brand:""}}),e.next=4,(0,N.wz)({typeId:n});case 4:200===(null===(r=e.sent)||void 0===r?void 0:r.code)&&(h(null===r||void 0===r||null===(a=r.result)||void 0===a?void 0:a.modelList),f(null===r||void 0===r||null===(l=r.result)||void 0===l?void 0:l.brandList));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,w.jsx)(u.Z,{title:null,style:{marginTop:5},size:"small",children:(0,w.jsxs)(b,{gutter:24,children:[(0,w.jsxs)(y,{span:4,children:[(0,w.jsx)(c.Z.Item,{label:"\u7c7b\u522b",name:["base","type"],rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u7c7b\u522b"}],children:(0,w.jsx)(I.Z,{showSearch:!0,onChange:function(e){return z.apply(this,arguments)},children:s.map((function(e){return(0,w.jsx)(I.Z.Option,{value:e.id,children:e.name},e.id)}))})}),(0,w.jsx)(c.Z.Item,{label:"\u7c7b\u522b\u540d\u79f0",name:"typeName",style:{display:"none"},children:(0,w.jsx)(g.Z,{})})]}),(0,w.jsxs)(y,{span:4,children:[(0,w.jsx)(c.Z.Item,{label:"\u578b\u53f7",name:["base","model"],rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u578b\u53f7"}],children:(0,w.jsx)(I.Z,{showSearch:!0,onChange:function(e){return v({modelName:x.find((function(n){return n.id===e})).name})},children:x.map((function(e){return(0,w.jsx)(I.Z.Option,{value:e.id,children:e.name},e.id)}))})}),(0,w.jsx)(c.Z.Item,{label:"\u578b\u53f7\u540d\u79f0",name:"modelName",style:{display:"none"},children:(0,w.jsx)(g.Z,{})})]}),(0,w.jsxs)(y,{span:4,children:[(0,w.jsx)(c.Z.Item,{label:"\u54c1\u724c",name:["base","brand"],rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u54c1\u724c"}],children:(0,w.jsx)(I.Z,{showSearch:!0,onChange:function(e){return v({brandName:Z.find((function(n){return n.id===e})).name})},children:Z.map((function(e){return(0,w.jsx)(I.Z.Option,{value:e.id,children:e.name},e.id)}))})}),(0,w.jsx)(c.Z.Item,{label:"\u54c1\u724c\u540d\u79f0",name:"brandName",style:{display:"none"},children:(0,w.jsx)(g.Z,{})})]}),(0,w.jsx)(y,{span:4,children:(0,w.jsx)(c.Z.Item,{label:"\u5907\u6ce8",name:["base","note"],children:(0,w.jsx)(g.Z,{})})}),(0,w.jsx)(y,{span:3,children:(0,w.jsx)(c.Z.Item,{label:"\u6570\u91cf",name:["base","count"],rules:[{required:!0,message:"\u8bf7\u586b\u5199\u6570\u91cf"}],children:(0,w.jsx)(g.Z,{})})}),(0,w.jsx)(y,{span:3,children:(0,w.jsx)(c.Z.Item,{label:"\u5355\u4ef7",name:["base","price"],rules:[{required:!0,message:"\u8bf7\u586b\u5199\u5355\u4ef7"}],children:(0,w.jsx)(g.Z,{})})}),(0,w.jsx)(m.Z,{type:"danger",onClick:function(){n.resetFields(),r()},children:"\u53d6\u6d88"})]})})};var k=function(e){return(0,w.jsxs)(u.Z,{title:"\u5ba2\u6237\u4fe1\u606f",size:"small",children:[(0,w.jsxs)(b,{gutter:24,wrap:!1,children:[(0,w.jsx)(y,{span:6,children:(0,w.jsx)(c.Z.Item,{label:"\u5ba2\u6237\u59d3\u540d",name:["custom","customName"],children:(0,w.jsx)(g.Z,{})})}),(0,w.jsx)(y,{span:6,children:(0,w.jsx)(c.Z.Item,{label:"\u5ba2\u6237\u7535\u8bdd",name:["custom","customPhone"],children:(0,w.jsx)(g.Z,{})})}),(0,w.jsx)(y,{span:12,children:(0,w.jsx)(c.Z.Item,{label:"\u5ba2\u6237\u5730\u5740",name:["custom","customAddress"],children:(0,w.jsx)(g.Z,{})})})]}),(0,w.jsxs)(b,{gutter:24,wrap:!1,children:[(0,w.jsx)(y,{span:3,children:(0,w.jsx)(c.Z.Item,{label:"\u4ed8\u6b3e\u65b9\u5f0f",name:["custom","payType"],children:(0,w.jsxs)(I.Z,{children:[(0,w.jsx)(Option,{value:"\u73b0\u91d1",children:"\u73b0\u91d1"}),(0,w.jsx)(Option,{value:"\u7b49\u901a\u77e5",children:"\u7b49\u901a\u77e5"}),(0,w.jsx)(Option,{value:"\u6708\u7ed3",children:"\u6708\u7ed3"}),(0,w.jsx)(Option,{value:"\u5f00\u5355\u6253\u6b3e",children:"\u5f00\u5355\u6253\u6b3e"})]})})}),(0,w.jsx)(y,{span:3,children:(0,w.jsx)(c.Z.Item,{label:"\u5b9a\u91d1",name:["custom","deposit"],children:(0,w.jsx)(g.Z,{})})}),(0,w.jsx)(y,{span:3,children:(0,w.jsx)(c.Z.Item,{label:"\u603b\u4ef7",name:["custom","totalPrice"],children:(0,w.jsx)(g.Z,{})})}),(0,w.jsx)(y,{span:4,children:(0,w.jsx)(c.Z.Item,{label:"\u7269\u6d41\u540d\u79f0",name:["custom","expressName"],children:(0,w.jsx)(g.Z,{})})}),(0,w.jsx)(y,{span:5,children:(0,w.jsx)(c.Z.Item,{label:"\u7269\u6d41\u7535\u8bdd",name:["custom","expressPhone"],children:(0,w.jsx)(g.Z,{})})}),(0,w.jsx)(y,{span:6,children:(0,w.jsx)(c.Z.Item,{label:"\u7269\u6d41\u5730\u5740",name:["custom","expressAddress"],children:(0,w.jsx)(g.Z,{})})})]})]})},C=[{title:"\u7c7b\u522b",dataIndex:"typeName"},{title:"\u578b\u53f7",dataIndex:"modelName"},{title:"\u54c1\u724c",dataIndex:"brandName"},{title:"\u5907\u6ce8",dataIndex:"note"},{title:"\u6570\u91cf(\u53f0)",dataIndex:"count"},{title:"\u5355\u4ef7(\u5143)",dataIndex:"price"},{title:"\u5c0f\u8ba1(\u5143)",dataIndex:"total"}];var S=function(){var e=c.Z.useForm(),n=(0,i.Z)(e,1)[0],s=(0,d.useState)(!1),p=(0,i.Z)(s,2),j=p[0],Z=p[1],b=(0,d.useState)([]),y=(0,i.Z)(b,2),I=y[0],g=y[1],S=(0,d.useState)([]),L=(0,i.Z)(S,2),V=L[0],O=L[1];function P(){return(P=(0,a.Z)((0,t.Z)().mark((function e(){var s,a,i,d,c,u;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.validateFields();case 2:if(s=e.sent,a=s.custom,i=s.base,null!==a&&void 0!==a&&a.customName||null!==a&&void 0!==a&&a.customPhone){e.next=6;break}return e.abrupt("return",o.ZP.error("\u8bf7\u8f93\u5165\u5ba2\u6237\u59d3\u540d\u548c\u7535\u8bdd"));case 6:if(null!==i&&void 0!==i&&i.type||V.length){e.next=8;break}return e.abrupt("return",o.ZP.error("\u6682\u65e0\u6570\u636e"));case 8:return d=(0,r.Z)(V),null!==i&&void 0!==i&&i.type&&d.push((0,l.Z)({},s.base)),c={orderList:d,customInfo:s.custom},e.next=13,(0,N.LV)(c);case 13:200===(null===(u=e.sent)||void 0===u?void 0:u.code)?(o.ZP.success("\u4e0b\u5355\u6210\u529f"),O(),Z(!1),n.resetFields()):o.ZP.error("\u4e0b\u5355\u5931\u8d25");case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,d.useEffect)((function(){(0,N.Tz)().then((function(e){200===(null===e||void 0===e?void 0:e.code)&&g(null===e||void 0===e?void 0:e.result)}))}),[]),(0,w.jsxs)(c.Z,{form:n,size:"small",autoComplete:"off",initialValues:{custom:{payType:"\u73b0\u91d1"}},children:[(0,w.jsxs)(u.Z,{bordered:!0,style:{height:"calc(100vh - 250px)",overflow:"auto",borderColor:"green"},children:[(0,w.jsxs)("div",{style:{float:"right",marginBottom:10},children:[(0,w.jsx)(m.Z,{icon:(0,w.jsx)(h.Z,{}),type:"primary",size:"default",onClick:function(){return Z(!0)},children:"\u65b0\u589e\u4e00\u884c"}),(0,w.jsx)(m.Z,{icon:(0,w.jsx)(f,{}),type:"primary",size:"default",style:{marginLeft:10},onClick:function(){n.validateFields().then((function(e){var s;null!==e&&void 0!==e&&null!==(s=e.base)&&void 0!==s&&s.type&&(O(V.concat((0,l.Z)((0,l.Z)({},e.base),{},{brandName:e.brandName,modelName:e.modelName,typeName:e.typeName}))),Z(!1),n.resetFields())}))},children:"\u4fdd\u5b58"}),(0,w.jsx)(m.Z,{icon:(0,w.jsx)(v.Z,{}),type:"primary",size:"default",style:{marginLeft:10},onClick:function(){return P.apply(this,arguments)},children:"\u786e\u5b9a\u4e0b\u5355"})]}),(0,w.jsx)(x.Z,{dataSource:V,rowKey:"id",columns:C,pagination:!1,bordered:!0,size:"small"}),j&&(0,w.jsx)(z,{form:n,close:Z,typeList:I})]}),(0,w.jsx)(k,{})]})}}}]);
//# sourceMappingURL=CreateOrder.2600cfc6.chunk.js.map